{% extends 'base.html' %}
{% load static %}

{% block content %}
    <body onload="main()">

    </body>
    <!-- <div>
        <h1>Player data for a season</h1>
        <table class="table">
            <thead class="thead-dark">
              <tr>
               
                <th scope="col">Season ID</th>
                <th scope="col">Player ID</th>
                <th scope="col">Game ID</th>
                <th scope="col">Game_Date</th>
                <th scope="col">Match_up</th>
                <th scope="col">Win/Loss</th>
                <th scope="col">MIN</th>
                <th scope="col">FGM</th>
                <th scope="col">FGA</th>
                <th scope="col">FG3A</th>
                <th scope="col">FG3_PCT</th>
                <th scope="col">FTM</th>
                <th scope="col">FTA</th>
                <th scope="col">FT_PCT</th>
                <th scope="col">OREB</th>
                <th scope="col">DREB</th>
                <th scope="col">REB</th>
                <th scope="col">AST</th>
                <th scope="col">STL</th>
                <th scope="col">BLK</th>
                <th scope="col">TOV</th>
                <th scope="col">PF</th>
                <th scope="col">PTS</th>
                <th scope="col">PLUS_MINUS</th>
                <th scope="col">VIDEO_AVALIABLE</th>
              </tr>
            </thead>
            <tbody>
            {% for game in one_season_game_log_list %}
            
              <tr>
                <td>{{ game.SEASON_ID }}</td>
                <td>{{ game.Player_ID }}</td>
                <td>{{ game.Game_ID }}</td>
                <td>{{ game.GAME_DATE }}</td>
                <td>{{ game.MATCHUP }}</td>
                <td>{{ game.WL }}</td>
                <td>{{ game.MIN }}</td>
                <td>{{ game.FGM }}</td>
                <td>{{ game.FGA }}</td>
                <td>{{ game.FG3A }}</td>
                <td>{{ game.FG3_PCT }}</td>
                <td>{{ game.FTM }}</td>
                <td>{{ game.FTA }}</td>
                <td>{{ game.FT_PCT }}</td>
                <td>{{ game.OREB }}</td>
                <td>{{ game.DREB }}</td>
                <td>{{ game.REB }}</td>
                <td>{{ game.AST }}</td>
                <td>{{ game.STL }}</td>
                <td>{{ game.BLK }}</td>
                <td>{{ game.TOV }}</td>
                <td>{{ game.PF }}</td>
                <td>{{ game.PTS }}</td>
                <td>{{ game.PLUS_MINUS }}</td>
                <td>{{ game.VIDEO_AVAILABLE }}</td>
              </tr>
            
            {% endfor %}
            </tbody>
          </table>
    </div> -->
    <script type="text/javascript">
      function main() {
        var received_data = {{ game_log_list | safe }};
        console.log(received_data);
        for (let value of Object.values(received_data)) {
            // console.log(value.GAME_DATE)
            // console.log(value.MATCHUP)
            // console.log(value.full_name)
            // console.log(value.abbreviation)
            // console.log(value.nickname)
            // console.log(value.city)
            // console.log(value.state)
            // console.log(value.year_founded)
          var barData = [value.PTS]
          var width = 500;
          var scaleFactor = 10;
          var barHeight = 30;

          var graph = d3.select("body")
                        .append("svg")
                        .attr("width", width)
                        .attr("height", barHeight * barData.length)
          
          var bar = graph.selectAll("g")
                        .data(barData)
                        .enter().append("g")
                        .attr("transform", function(d, i) {
                          return "translate(0,"+ i * barHeight +")";
                        });
          
          bar.append("rect")
            .attr("width", function(d) {
                  return d * scaleFactor;
            })
            .attr("height", barHeight - 1)

          bar.append("text")
            .attr("x", function(d){
                  return (d*scaleFactor);
            })
            .attr("y", barHeight / 2)
            .attr("dy", ".35em")
            .text(function(d){ 
              return d; 
              });
    }}

      
    </script>
   
{% endblock %}